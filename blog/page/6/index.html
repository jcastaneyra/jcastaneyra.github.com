
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JCastaneyra blog</title>
  <meta name="author" content="Jose Castaneyra">

  
  <meta name="description" content="Mi flaca y yo ya estamos comprometidos, ya le entregué el anillo de compromiso, he aquí la evidencia. Le entregué el anillo una tarde en la playa, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jcastaneyra.com/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="JCastaneyra blog" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3233987-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">JCastaneyra blog</a></h1>
  
    <h2>My ideas repo</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jcastaneyra.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/11/02/comprometidos/">¡Comprometidos!</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-11-02T00:00:00-06:00" pubdate>Nov 2<span>nd</span>, 2006</time>
        
         | <a href="/2006/11/02/comprometidos/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Mi flaca y yo ya estamos comprometidos, ya le entregué el anillo de compromiso, he aquí la evidencia.</p>

<p><img src="http://c243421.r21.cf1.rackcdn.com/anillo_compromiso.jpg" alt="anillo_compromiso.jpg" /></p>

<p>Le entregué el anillo una tarde en la playa, ese día, el cielo estaba nublado, pero parte del cielo en el horizonte se veía despejado y con los rayos de sol tocando sobre las nubes, antes de entregarle el anillo le di una carta en la cual le decía todo mi sentir y el porqué quiero pasar el resto de mis días con ella.</p>

<script type="text/javascript">
  var custom_disqus_url = 'http://www.jcastaneyra.com/2006/11/02/%c2%a1comprometidos/';
</script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/06/recuperando-grub-con-el-disco-de-instalacion-de-debian/">Recuperando GRUB Con El Disco De Instalación De Debian</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-10-06T00:00:00-05:00" pubdate>Oct 6<span>th</span>, 2006</time>
        
         | <a href="/2006/10/06/recuperando-grub-con-el-disco-de-instalacion-de-debian/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Anoche me puse a instalar un nuevo disco duro de 160 Gb en una maquinilla que tengo en la casa, que está corriendo Debian Sarge y que está funcionando como servidor.
Este nuevo disco duro vino a sustituir un par de discos (uno de 6 Gb en el que estaban / y swap y el otro de 2.5 Gb que tenía /home), los cuáles ya tenían todo instalado, y como no quise instalar de nueva cuenta el Debian (que hueva de imaginarse todo lo que implicaría, instalar desde ceros, levantar servicios, usuarios, etc.), decidí usar el GParted Live CD, muy útil por cierto, para copiar las particiones del disco duro principal (el disco duro que tenía /boot, y swap) y expandir la partición / hasta ocupar todo el disco.
La copia de estas particiones y la expansión de / fue exitosa, pero con lo que no conté fue con que el Grub no estaría en el MBR de este nuevo disco duro, obvio verdad, bueno, pues me di a la tarea de reinstalar Grub en este disco, busqué en internet y todo parecía facil, pero a lo que pensé me llevaría no más de una hora me tomó cinco horas dado a unos pequeños errores que cometí, y he aquí mis experiencias.
Bien, lo primero que hice fue arrancar con el disco de instalación de Debian, y hasta el momento que dice que si queremos particionar el disco duro, ahí presionamos las teclas &lt;Alt&gt; &lt;F2&gt;, ahí tendremos acceso al shell.
Una vez en el shell, creamos un directorio donde montaremos la partición en donde se encuentra /boot, en este caso yo cree /disk de la siguiente manera:</p>

<pre># mkdir /disk</pre>


<p>Para saber que partición vamos a montar, habrá que darle el comando siguiente:</p>

<pre># fdisk -l</pre>


<p>Con este comando nos saldrá una lista de particiones, y tendrán un nombre raro, pero aún así será facil reconocer la partición que nos interesa montar (la que tiene /boot), lo siguiente será montar la partición (el dispositivo me imagino que variará, aún así este dispositivo lo veremos en la lista de particiones mostradas por el comando anterior):</p>

<pre># mount -t ext3 /dev/bus0/lun0/disk0/part1 /disk</pre>


<p>Ahora bien, haremos esta partición montada como nuestra partición root:</p>

<pre># chroot /disk</pre>


<p>En mi caso, como los discos los cambié de IDE, los nombres de las particiones cambiaron, por lo tanto tuve que editar /boot/grub/menu.lst, aquí fue donde tuve los problemas que me hicieron tardarme las cinco horas, todo por no fijarme bien al momento de editar, tuve que modificar la línea de root a (hd0,0) y me faltó editar en donde se encontraba el kernel, entonces como esta apuntaba a otra partición en otro dispositivo debí haberla editado por eso ahí me pasé las horas sin saber porque no podía arrancar, pero bien, ya que encontré el problema, así más o menos quedó lo que edité:</p>

<pre lang="bash">
title           Debian GNU/Linux, kernel 2.6.16-2-686
root            (hd0,0)
kernel          /boot/vmlinuz-2.6.16-2-686 root=/dev/hda1 ro
initrd          /boot/initrd.img-2.6.16-2-686
savedefault
boot</pre>


<p>Posteriormente, hubo que ejecutar:</p>

<pre># grub</pre>


<p>En el shell de grub, ejecuté lo siguiente:</p>

<pre lang="bash">
root (hd0,0)
setup (hd0)
quit</pre>


<p>Y listo, a reiniciar!
Con todo esto quedó, ya después sólo copié /home que estaba en el segundo disco duro,  claro de haber sido cuidadoso al leer lo que estaba haciendo, esto en teoría debió haber durado menos de una hora, entonces aquí está la experiencia para los que quieran cambiar de discos duros puedan hacerlo en el menor tiempo del que yo lo hice.
:D</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/21/hace-varios-kilos/">Hace Varios Kilos &#8230;</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-09-21T00:00:00-05:00" pubdate>Sep 21<span>st</span>, 2006</time>
        
         | <a href="/2006/09/21/hace-varios-kilos/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Entre mis discos de respaldo de hace algunos años me encontré con esta foto, ya han pasado varios kilos desde que nos la tomaron, algunos si se ven totalmente transformados ahora, ¿verdad Miguel?</p>

<p>:)</p>

<p><a href="http://static.flickr.com/25/248703948_96c31af434_b.jpg"><img src="http://static.flickr.com/25/248703948_96c31af434.jpg" alt="hace varios kilos ya" height="318" width="500" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/14/bajate-cabron/">¡Bajate Cabrón!</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-09-14T00:00:00-05:00" pubdate>Sep 14<span>th</span>, 2006</time>
        
         | <a href="/2006/09/14/bajate-cabron/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>¡Ah que cosas, de como nuestra policía mexicana a veces se pasa de veras! sino es que de vez en diario se pasa de veras, primero dan muestras de violencia y abuso de autoridad y después averigüan si el sospechoso es el culpable.</p>

<p>Hace unas horas, mi amigo el Morales y yo nos disponíamos a ir a cenarnos unas hamburguesas al carbón, después de eso comprar un botellón de agua y un par de chelas.</p>

<p>Ibamos por una de las avenidas del fraccionamiento donde vivimos, y un vocho blanco nos rebasó, puse atención del vocho porque llevaba un golpe en la defensa trasera, algo que es raro de ver en los vochos :), antes de una curva se metió en una calle, avanzamos unos treinta metros, y en eso noto que una patrulla venía detras de nosotros, le dije al Morales &#8220;hazte a la orilla, viene una patrulla y parece que nos quiere pasar&#8221;, el Morales se detuvo, en eso la patrulla que venía se detuvo justo detrás y otra patrulla apareció en frente de nosotros con las luces sobre nuestros rostros, un policía salió corriendo hacia el lugar del pasajero, que es donde iba yo, gritando &#8220;¡bajate cabrón!&#8221; abrió la puerta y con bastante violencia me bajó del vocho (el Morales después me dijo que mientras me estaba bajando a la fuerza, el policía sacó la pistola, la verdad yo ni cuenta me di) con bastante fuerza, me aventó hacia el vocho gritando &#8220;arriba las manos&#8221; y con bastante rudeza me revizó, creo que con la adrenalina ni siquiera sentí los madrazos, el Morales, le preguntaba a otro policía &#8220;¿que pasa? aquí traigo mi identificiación, ¿quieres verla?&#8221;, en eso recordé el vocho que antes nos había pasado, les dije &#8220;nos confunden, un vocho blanco se metió antes, traía un golpe en la defensa&#8221;, ellos gritaron &#8220;¡saca la portatil!&#8221; me imagino que se referían a una laptop, sus radios sonaban, y otro tercer policía escuchaba, creo que el número de placas y la descripción de un golpe en el vocho sospechoso, la patrulla que estaba atrás al escuchar esto se retiró y se dirigieron hacia la entrada por donde se había metido el otro vocho y que ya había mencionado, en eso dijeron los policías &#8220;¡disculpenos, pero ponganse en nuestro lugar!&#8221; porque el Morales no paraba de decir &#8220;¿que pasa? y ¿porque le sacas la pistola a mi cuate?&#8221;, unos segundos después se dirigieron hacia donde les habíamos indicado que se había metido el otro vocho, sólo dijeron &#8220;dispensenos&#8221;.</p>

<p>Bueno, creo que está bien que hagan su trabajo en situaciones como estas, pero ahora si nos tocó la mala suerte de ser sospechosos, ni pex.</p>

<p>Vaya aventura la de este día, y las chelas que pensabamos tomarnos por puro gusto ahora también nos están quitando el inche susto :P</p>

<p class="poweredbyperformancing"><a href="http://performancing.com/firefox">
</a>

<script type="text/javascript">
  var custom_disqus_url = 'http://www.jcastaneyra.com/2006/09/14/%c2%a1bajate-cabron/';
</script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/09/instalando-paquetes-de-stable-y-testing-en-debian/">Instalando Paquetes De Stable Y Testing en Debian</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-09-09T00:00:00-05:00" pubdate>Sep 9<span>th</span>, 2006</time>
        
         | <a href="/2006/09/09/instalando-paquetes-de-stable-y-testing-en-debian/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hace poco instalé la última versión stable de Debian, pero resulta que tenía interés de probar algunos paquetes más recientes de MySQL y de PHP, los cuáles se encontraban en la versión testing de los paquetes, así es que me puse a buscar en la red para saber como poder instalar desde la versión testing sin tener que mover todos mis paquetes a esta versión, o sin tener que estar modificando la lista de fuentes en sources.list a cada rato, y he aquí lo que se tiene que hacer.</p>

<p>Primero debemos tener la lista de fuentes de las versiones stable y testing en /etc/apt/sources.list. En mi caso apunto a los fuentes que están en un mirror de la UNAM:</p>

<pre lang="bash"># sources for stable
deb http://nisamox.fciencias.unam.mx/debian/ stable main
deb-src http://nisamox.fciencias.unam.mx/debian/ stable main

deb http://security.debian.org/ stable/updates main

# sources for testing
deb http://nisamox.fciencias.unam.mx/debian/ testing main
deb-src http://nisamox.fciencias.unam.mx/debian/ testing main
#deb http://security.debian.org/ stable/updates main</pre>


<p>Ahora tenemos que agregar a /etc/apt/apt.conf (crear el archivo si no existe) la siguiente línea:</p>

<pre lang="bash">APT::Default-Release "stable";</pre>


<p>si no agregamos esta línea a apt.conf, al momento de hacer apt-get upgrade el administrador de paquetes querrá actualizar los paquetes a testing.</p>

<p>Ya con esto podemos instalar MySQL y PHP de los fuentes de testing:</p>

<pre># apt-get update
# apt-get -t testing install mysql-server-5.0
# apt-get -t testing install php5-mysql</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/06/instalacion-de-mysql-php-y-jaws-en-openbsd/">Instalación De MySQL, PHP Y Jaws en OpenBSD</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-09-06T00:00:00-05:00" pubdate>Sep 6<span>th</span>, 2006</time>
        
         | <a href="/2006/09/06/instalacion-de-mysql-php-y-jaws-en-openbsd/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Muchos de los sitios en internet que hacen uso de páginas con contenido dinámico utilizan MySQL como base de datos y PHP como lenguaje de programación para habilitar dichas páginas dinámicas. Pero existen algunos sistemas de administración de contenidos (Content Management System), uno en partícular que ha sido creado por mexicanos (<a href="http://ion.gluch.org.mx/">Jonathan Hernández</a>), y es Jaws (<a href="http://www.jaws.com.mx" title="Jaws">http://www.jaws.com.mx</a>), éste hace uso de MySQL y de PHP. A continuación muestro un pequeño howto de como instalar MySQL, PHP y Jaws sobre OpenBSD.</p>

<p>Bien, la versión de OpenBSD sobre la cuál vamos a instalar estos paquetes es la 3.9, la guía de instalación de OpenBSD se encuentra aquí:</p>

<p><a href="http://www.openbsd.org/faq/faq4.html" title="OpenBSD faq">http://www.openbsd.org/faq/faq4.html</a></p>

<p><b>Instalando MySQL y PHP.</b></p>

<p>Para tener MySQL y PHP en nuestro sistema, necesitamos instalar algunos paquetes, los instalamos de la siguiente manera:</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/mysql-server-5.0.22.tgz</pre>


<p>Instalamos PHP5:</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/php5-core-5.0.5.tgz</pre>


<p>Habilitamos el módulo de PHP5:</p>

<pre># /usr/local/sbin/phpxs -s

# cp /usr/local/share/examples/php5/php.ini-recommended /var/www/conf/php.ini</pre>


<p>Instalamos y habilitamos el modulo de PHP para MySQL:</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/php5-mysql-5.0.5p0.tgz

# /usr/local/sbin/phpxs -a mysql</pre>


<p>Instalamos y habilitamos el módulo de GD para PHP:</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/php5-gd-5.0.5p2-no_x11.tgz

# /usr/local/sbin/phpxs -a gd</pre>


<p><b>Configurando MySQL.</b></p>

<p>Ahora necesitamos hacer algunas cuántas configuraciones de MySQL, para empezar arrancaremos el servidor de MySQL:</p>

<pre># /usr/local/bin/mysqld_safe &amp;</pre>


<p>Después de arrancar MySQL necesitamos darle un password al root de MySQL, ya que por defecto no tiene ningún password configurado, se lo asignamos de la siguiente manera:</p>

<pre># /usr/local/bin/mysqladmin -u root password mipassword</pre>


<p>Intentamos accesar a MySQL con root y su nuevo password:</p>

<pre># mysql -u root -p</pre>


<p>Y tenemos la siguiente salida:</p>

<pre>Enter password:
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 2 to server version: 5.0.22-log

Type 'help;' or 'h' for help. Type 'c' to clear the buffer.

mysql&gt;</pre>


<p>Ya que estamos aquí crearemos la base de datos que usará jaws:</p>

<pre>mysql&gt; create database jaws;</pre>


<p>Podemos ver que la base de datos ha sido creada con:</p>

<pre>mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.04 sec)</pre>


<p>Ya tenemos nuestra base de datos, ahora necesitamos crear un usuario para accesar a esta base de datos, y será con todos los prilegios sobre la misma:</p>

<pre>mysql&gt; grant all privileges
    -&gt; on jaws.*
    -&gt; to 'jaws'@'localhost'
    -&gt; identified by 'mipassword';</pre>


<p>Nos salimos de MySQL con:</p>

<pre>mysql&gt; exit</pre>


<p>Como Apache corre como chrooted en /var/www necesitamos hacer unos hard links para que pueda trabajar con los sockets de MySQL:</p>

<pre># mkdir -p /var/www/var/run/mysql
# ln -f /var/run/mysql/mysql.sock /var/www/var/run/mysql/mysql.sock</pre>


<p><b>Configurando Apache y PHP.</b></p>

<p>Necesitamos asegurarnos de que la siguiente línea se encuentre descomentada en /var/www/conf/httpd.conf:</p>

<pre>AddType application/x-httpd-php .php</pre>


<p>También que la línea de DirectoryIndex tenga lo siguiente:</p>

<pre>DirectoryIndex index.html index.php</pre>


<p>Hay que crear el directorio /var/www/tmp y darle permisos de escritura para todos los usuarios, este directorio puede ser usado por algunas aplicaciones que están en PHP (jaws por ejemplo):</p>

<pre># mkdir /var/www/tmp

# chmod 777 /var/www/tmp</pre>


<p>Ahora vamos a reiniciar nuestro servidor de apache:</p>

<pre># apachectl stop
# apachectl start</pre>


<p>Podemos probar que nuestro servidor de apache ya esté funcionando, creamos un archivo test.php en el directorio de documentos de http /var/www/htdocs, y metemos en este archivo lo siguiente:</p>

<pre>&lt;?php
phpinfo();
?&gt;</pre>


<p>La salida deberá ser algo así:</p>

<p><a href="http://img89.imageshack.us/img89/3706/phptestsa3.jpg"><img src="http://img89.imageshack.us/img89/3088/phptestye8.jpg" alt="php test" height="242" width="320" /></a></p>

<p><b>Instalando y configurando Jaws.</b></p>

<p>Para empezar debemos bajar la última versión de Jaws, para poder bajarlo utilizaremos wget, el cuál necesitamos instalarlo en nuestro sistema (a menos que ya se tenga instalado):</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/wget-1.10.2p0.tgz</pre>


<p>Posteriormente bajamos la última versión de Jaws:</p>

<pre>$ wget http://developer.novell.com/wiki/index.php/Special:File/jaws/jaws-0.6.2/jaws-complete-0.6.2.tar.gz</pre>


<p>Descomprimimos el archivo:</p>

<pre>$ tar xvzf jaws-complete-0.6.2.tar.gz</pre>


<p>Podría describir todos los pasos aquí, pero es mejor seguir la guía de instalación que se encuentra aquí:
<a href="http://wiki.jaws-project.com/doku.php?id=jaws:v06:installation" title="Jaws installation"> http://wiki.jaws-project.com/doku.php?id=jaws:v06:installation</a>
Nada más aquí un detalle, hay que darle permisos de escritura y lectura a los directorios /var/www/htdocs/data y /var/www/htdocs/config:</p>

<pre># chmod 777 /var/www/htdocs/data /var/www/htdocs/config</pre>


<p>Una vez seguido el proceso de instalación de Jaws, ya tenemos un servidor OpenBSD corriendo MySQL, PHP y lo mejor de todo Jaws!!!
<a href="http://img168.imageshack.us/img168/9676/jawsrunningfh8.jpg"><img src="http://img89.imageshack.us/img89/6279/jawsrunningbl5.jpg" alt="Jaws running" height="242" width="320" /></a>
Referencias.
<a href="http://freeyourbox.org/tutorials/bsd/obsd3.8_apache_php_mysql.html"> http://www.nomoa.com/bsd/mysql.htm</a></p>

<p><a href="http://freeyourbox.org/tutorials/bsd/obsd3.8_apache_php_mysql.html">http://freeyourbox.org/tutorials/bsd/obsd3.8_apache_php_mysql.html</a></p>

<p><a href="http://dev.mysql.com/doc/refman/5.0/en/adding-users.html"> http://dev.mysql.com/doc/refman/5.0/en/adding-users.html</a></p>

<p><a href="http://wiki.jaws-project.com/doku.php?id=jaws:v06:installation"> http://wiki.jaws-project.com/doku.php?id=jaws:v06:installation</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/05/instalacion-openbsd-apache-y-ddclient-dyndnsorg/">Instalación De OpenBSD, Apache Y Ddclient (dyndns.org)</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2006-09-05T00:00:00-05:00" pubdate>Sep 5<span>th</span>, 2006</time>
        
         | <a href="/2006/09/05/instalacion-openbsd-apache-y-ddclient-dyndnsorg/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>OpenBSD es uno de los sistemas open source tipo unix más seguros que existen, y ¿porqué es uno de los mas seguros?, es porque la seguridad viene por default (&#8220;secure by default&#8221;), es decir, en la instalación por default se tiene un sistema minimalista con tan sólo los servicios mínimos requeridos y eso lo hace muy seguro, es más, en la página de OpenBSD (<a href="http://www.openbsd.org" title="OpenBSD">http://www.openbsd.org</a>) aseguran que sólo han tenido un hueco remoto en la instalación por default en más de 8 años. Y claro, algo muy importante es que lo puedo instalar en mi máquina pentium a 200 Mhz, si lo se, corre muy lento, pero creo que es la mejor opción.</p>

<p>Bien, para instalar openbsd hay que seguir la guía que está aquí:</p>

<p><a href="http://www.openbsd.org/faq/faq4.html" title="OpenBSD faq 4">http://www.openbsd.org/faq/faq4.html</a></p>

<p>Una vez que tengamos instalado OpenBSD habrá que crear un primer usuario, y como queremos que este usuario pueda acceder al comando <i>su</i> para realizar tareas administrativas como root se tendrá que agregar el usuario al grupo <i>wheel</i>. Se ejecuta el siguiente comando como root:</p>

<pre># adduser</pre>


<p>Cómo es la primera vez en ejecutarse adduser, se desplegará lo siguiente, a lo cual daremos &lt;Enter&gt; a todas las preguntas de configuración, con esto habilitaremos las opciones por defecto:</p>

<pre>Couldn't find /etc/adduser.conf: creating a new adduser configuration file
Reading /etc/shells
Enter your default shell: csh ksh nologin sh [ksh]:
Your default shell is: ksh -&gt; /bin/ksh
Default login class: daemon default staff [default]:
Enter your default HOME partition: [/home]:
Copy dotfiles from: /etc/skel no [/etc/skel]:
Send message from file: /etc/adduser.message no [no]:
Do not send message
Prompt for passwords by default (y/n) [y]:
Default encryption method for passwords: auto blowfish des md5 old
[auto]:
Use option ``-silent'' if you don't want to see all warnings and questions.

Reading /etc/shells
Check /etc/master.passwd
Check /etc/group

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.</pre>


<p>Posteriormente llenamos los datos del usuario de la siguiente manera:</p>

<pre>Enter username []: jcastaneyra
Enter full name []: Jose Castaneyra
Enter shell csh ksh nologin sh [ksh]:
Uid [1000]:
Login group jcastaneyra [jcastaneyra]:
Login group is ``jcastaneyra''. Invite jcastaneyra into other groups: guest no
[no]: wheel
Login class daemon default staff [default]:
Enter password []:
Enter password again []:

Name:        jcastaneyra
Password:    ****
Fullname:    Jose Castaneyra
Uid:         1000
Gid:         1000 (jcastaneyra)
Groups:      jcastaneyra wheel
Login Class: default
HOME:        /home/jcastaneyra
Shell:       /bin/ksh
OK? (y/n) [y]: y
Added user ``jcastaneyra''
Copy files from /etc/skel to /home/jcastaneyra
Add another user? (y/n) [y]: n
Goodbye!</pre>


<p>Ahora bien, habrá que probar nuestro nuevo usuario, le damos el comando <i>exit</i> y hacemos login con el usuario creado, y veremos que podemos acceder al root con el comando <i>su</i>.</p>

<p>Ya como root podemos iniciar nuestro servidor apache.</p>

<pre># apachectl start
/usr/sbin/apachectl start: httpd started</pre>


<p>Para que nuestro servidor de apache inicie cada vez que arranque OpenBSD deberemos meter las siguientes líneas a <i>/etc/rc.conf.local</i>:</p>

<pre>httpd_flags=YES</pre>


<p>Para poder tener corriendo el ddclient con un servicio de dominios dinámicos debemos darnos de alta con un proveedor de estos servicios, para este caso escogí dyndns, nos damos de alta y damos de alta el dominio que queramos (uno de los dominios gratuitos, o bien comprar uno, pero eso nos costaría), en este caso agregamos oax.homeunix.org.</p>

<p><a href="http://img432.imageshack.us/img432/919/dyndnsmg5.jpg"><img src="http://img459.imageshack.us/img459/4291/dyndnszb6.jpg" alt="Dyndns" height="242" width="320" /></a></p>

<p>Ahora bien, para que nuestra ip dinámica pueda ser actualizada frecuentemente con el dominio que registramos en dyndns, tenemos que instalar el ddclient, y lo instalamos de la siguiente manera:</p>

<pre># pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.9/packages/i386/ddclient-3.6.6.tgz
ddclient-3.6.6: complete</pre>


<p>Editamos el archivo <i>/etc/ddclient/ddclient.conf</i>, y en nuestro caso nos aseguramos de que las líneas siguientes estén en el archivo:</p>

<pre>use=web, web=checkip.dyndns.org/, web-skip='IP Address' # found after IP Address

login=jcastaneyra                               # default login
password=mipassword                             # default password

##
## dyndns.org dynamic addresses
##
## (supports variables: wildcard,mx,backupmx)
##
 server=members.dyndns.org,
 protocol=dyndns2
 oax.homeunix.org</pre>


<p>Y ejecutamos el ddclient con el comando <i>/usr/local/sbin/ddclient</i>.</p>

<p>Ahora bien, para que el ddclient se ejecute cada vez que arranque nuestra máquina hay que agregar las siguientes líneas a <i>/etc/rc.local</i> antes de <i>echo &#8216;.&#8217;</i></p>

<pre>if [ -x /usr/local/sbin/ddclient ]; then
echo -n ' ddclient';       /usr/local/sbin/ddclient
fi</pre>


<p>¡A probar nuestro servidor de web con dominio dinámico! (dominio sobre una ip dinámica)</p>

<p><a href="http://img459.imageshack.us/img459/7516/apacheoaxpd8.jpg"><img src="http://img367.imageshack.us/img367/6486/apacheoaxcl1.jpg" alt="Web corriendo" height="242" width="320" /></a></p>

<p>Y listo, ya tenemos un servidor OpenBSD con web y dominio corriendo :D</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/09/21/macs-en-venta/">Macs usadas en Venta</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/19/mi-blog-con-octopress/">Mi Blog Con Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2010/05/30/installing-rabbitmq-stomp-in-ubuntumac/">Installing RabbitMQ + Stomp in Ubuntu/Mac</a>
      </li>
    
      <li class="post">
        <a href="/2010/02/12/bundler-gem-and-daemons-error-the-default-gemfile-was-not-found/">Bundler gem and Daemons error (The default Gemfile was not found)</a>
      </li>
    
      <li class="post">
        <a href="/2010/01/07/table-names-case-insensitive-for-mysql-linux/">Table names case insensitive for MySQL Linux</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jcastaneyra">@jcastaneyra</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jcastaneyra',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("jcastaneyra", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/jcastaneyra" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @jcastaneyra</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/jcastaneyra?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/jcastaneyra">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/112262934273275148051?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>AdSense</h1>
  <script type="text/javascript"><!--
    google_ad_client = "ca-pub-1928761598459347";
    /* 160x600, creado 13/09/08 */
    google_ad_slot = "8245795082";
    google_ad_width = 160;
    google_ad_height = 600;
    //-->
  </script>
  <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
  </script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Jose Castaneyra -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jcastaneyra';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
